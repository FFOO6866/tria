# Tria AIBPO POV Configuration
# Copy this file to .env and fill in your actual values

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
# PostgreSQL connection (required by DataFlow alpha)
DATABASE_URL=postgresql://postgres:password@localhost:5432/tria_aibpo

# Database settings
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20

# ============================================================================
# XERO API CONFIGURATION (REQUIRED FOR DEMO)
# ============================================================================
# Get credentials from: https://developer.xero.com/
# SECURITY: Never commit actual credentials - use environment-specific .env files
XERO_CLIENT_ID=
XERO_CLIENT_SECRET=
XERO_REFRESH_TOKEN=
XERO_TENANT_ID=

# Xero API settings
XERO_TOKEN_URL=https://identity.xero.com/connect/token
XERO_API_URL=https://api.xero.com/api.xro/2.0
XERO_RATE_LIMIT_PER_MINUTE=60

# ============================================================================
# OPENAI API CONFIGURATION (REQUIRED FOR LLM AGENTS)
# ============================================================================
# Get API key from: https://platform.openai.com/
# SECURITY: Never commit actual API keys - use environment-specific .env files
OPENAI_API_KEY=
OPENAI_MODEL=gpt-4-turbo-preview
OPENAI_TEMPERATURE=0.7
OPENAI_MAX_TOKENS=2000

# ============================================================================
# FILE PATHS
# ============================================================================
# Excel files (relative to project root) - Using TRIA's existing files
MASTER_INVENTORY_FILE=./data/inventory/Master_Inventory_File_2025.xlsx
DO_TEMPLATE_FILE=./data/templates/DO_Template.xlsx

# Generated files output directory
OUTPUT_DIR=./data/generated
DO_OUTPUT_DIR=./data/generated/deliveries
INVOICE_OUTPUT_DIR=./data/generated/invoices

# ============================================================================
# BUSINESS LOGIC CONFIGURATION
# ============================================================================
# Order cutoff time (24-hour format)
CUTOFF_TIME=14:00

# Anomaly detection tolerance (Â±percentage)
ANOMALY_TOLERANCE=0.15

# Delivery scheduling
DEFAULT_DELIVERY_DAYS=2
DELIVERY_SLOTS=08:00-10:00,10:00-12:00,14:00-16:00,16:00-18:00

# Tax rate (Singapore GST)
TAX_RATE=0.08

# NOTE: Pricing is managed in the database Product catalog
# NO HARDCODED PRICES - All pricing comes from products.unit_price

# ============================================================================
# XERO INTEGRATION CONFIGURATION
# ============================================================================
# Xero account codes and tax types (configurable per deployment)
XERO_SALES_ACCOUNT_CODE=200
XERO_TAX_TYPE=OUTPUT2

# ============================================================================
# DEMO CONFIGURATION
# ============================================================================
# Set to "true" to enable demo mode with cached responses
DEMO_MODE=false

# Demo settings
LOAD_SAMPLE_DATA=true
ENABLE_CIRCUIT_BREAKERS=true

# ============================================================================
# NEXUS PLATFORM CONFIGURATION
# ============================================================================
# API server
API_PORT=8000
API_HOST=0.0.0.0

# MCP server
MCP_PORT=3001

# Rate limiting
RATE_LIMIT_PER_MINUTE=100

# ============================================================================
# MONITORING & LOGGING
# ============================================================================
LOG_LEVEL=INFO
ENABLE_MONITORING=true

# Sentry error tracking (optional - for production)
# Get DSN from: https://sentry.io/
# SECURITY: Never commit actual DSN - use environment-specific .env files
SENTRY_DSN=
# Environment: production, staging, development
ENVIRONMENT=development

# ============================================================================
# REDIS CONFIGURATION (REQUIRED FOR IDEMPOTENCY)
# ============================================================================
# Redis connection for caching and idempotency
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=

# ============================================================================
# PRODUCTION VALIDATION LIMITS (OPTIONAL OVERRIDES)
# ============================================================================
# Order validation limits (can be adjusted per environment)
MAX_QUANTITY_PER_ITEM=10000
MAX_ORDER_TOTAL=100000.00
MAX_LINE_ITEMS=100
MIN_ORDER_TOTAL=0.01

# ============================================================================
# SECURITY
# ============================================================================
# Secret key for session encryption (generate with: openssl rand -hex 32)
# SECURITY: Generate unique key per environment - NEVER reuse across environments
SECRET_KEY=

# CORS allowed origins (comma-separated)
CORS_ORIGINS=http://localhost:8000,http://localhost:3000

# ============================================================================
# EXTERNAL INTEGRATIONS (FUTURE)
# ============================================================================
# Email notifications (SendGrid)
# SENDGRID_API_KEY=your_sendgrid_key
# FROM_EMAIL=noreply@tria.com

# SMS notifications (Twilio)
# TWILIO_ACCOUNT_SID=your_twilio_sid
# TWILIO_AUTH_TOKEN=your_twilio_token
# TWILIO_PHONE_NUMBER=+6512345678

# WhatsApp Business API (Future)
# WHATSAPP_BUSINESS_ID=your_whatsapp_business_id
# WHATSAPP_ACCESS_TOKEN=your_whatsapp_token

# Lark integration (Future)
# LARK_APP_ID=your_lark_app_id
# LARK_APP_SECRET=your_lark_app_secret

# ============================================================================
# DEPLOYMENT CONFIGURATION (Required for deploy_agent.py)
# ============================================================================
# Server connection details for deployment
# These settings are used by scripts/deploy_agent.py for automated deployment

# Server IP address or hostname
SERVER_IP=

# SSH username (typically 'ubuntu', 'ec2-user', or 'root')
SERVER_USER=ubuntu

# Path to SSH private key file (.pem file)
# Example: ~/.ssh/my-server-key.pem or C:\Users\username\.ssh\server.pem
PEM_KEY_PATH=

# Environment mode: 'development' or 'production'
# CRITICAL: This affects which settings are used
# - development: Demo mode, sample data, verbose logging
# - production: Real data, production settings, security hardened
ENVIRONMENT=development

# ============================================================================
# DEPLOYMENT NOTES
# ============================================================================
# Before deploying:
# 1. Copy this file to .env: cp .env.example .env
# 2. Fill in all values above (especially SERVER_IP and PEM_KEY_PATH)
# 3. Ensure .env.docker is configured with all required variables
# 4. Run deployment: python scripts/deploy_agent.py
#
# See docs/DEPLOYMENT.md for complete deployment guide
